; Not licensed by Nintendo
;
; Copyright (c) 2025 Dmitry Shechtman

include "color.inc"


DEF INTRO_SGB_DELAY      EQU $80

IF !DEF(INTRO_SONG_DELAY)
	DEF INTRO_SONG_DELAY EQU   0
ENDC

DEF INTRO_TOP_SLIM_WIDTH EQU   3
DEF INTRO_TOP_NORM_WIDTH EQU   6

DEF INTRO_0_WIDTH        EQU   2
DEF INTRO_1_WIDTH        EQU   1
DEF INTRO_2_WIDTH        EQU   2
DEF INTRO_3_WIDTH        EQU   1
DEF INTRO_4_WIDTH        EQU   2
DEF INTRO_5_WIDTH        EQU   2

DEF MAP_LOGO             EQU TILEMAP0
DEF COL_LOGO             EQU   4
DEF ROW_LOGO             EQU   8

DEF MAP_LOGO2            EQU TILEMAP1
DEF ROW_LOGO2            EQU   0
DEF COL_LOGO2            EQU COL_LOGO

DEF MAP_INTRO_BY         EQU TILEMAP0
DEF ROW_INTRO_BY         EQU   6
DEF COL_INTRO_BY         EQU  13

DEF MAP_INTRO_E          EQU TILEMAP0
DEF ROW_INTRO_E          EQU   8
DEF COL_INTRO_E          EQU   9

DEF MAP_INTRO_N2         EQU TILEMAP1
DEF ROW_INTRO_N2         EQU   0
DEF COL_INTRO_N2         EQU   0

DEF X_INTRO_N2           EQU  86 + WX_OFS

DEF Y_INTRO_REG          EQU  76
DEF X_INTRO_REG          EQU 136

DEF Y_INTRO_INIT         EQU LOW(-8)
DEF Y_INTRO_TOP          EQU  64
DEF Y_INTRO_BOTTOM       EQU  80

DEF X_INTRO_NOT          EQU  48
DEF X_INTRO_TOP_0        EQU X_INTRO_NOT   + 22
DEF X_INTRO_TOP_1        EQU X_INTRO_TOP_0 + INTRO_TOP_SLIM_WIDTH
DEF X_INTRO_TOP_2        EQU X_INTRO_TOP_1 + INTRO_TOP_SLIM_WIDTH
DEF X_INTRO_TOP_3        EQU X_INTRO_TOP_2 + INTRO_TOP_NORM_WIDTH
DEF X_INTRO_TOP_4        EQU X_INTRO_TOP_3 + INTRO_TOP_NORM_WIDTH
DEF X_INTRO_TOP_5        EQU X_INTRO_TOP_4 + INTRO_TOP_NORM_WIDTH
IF DEF(EN_GB)
    DEF X_INTRO_TOP_6    EQU X_INTRO_TOP_5 + INTRO_TOP_NORM_WIDTH
ELSE
    DEF X_INTRO_TOP_6    EQU X_INTRO_TOP_5 + INTRO_TOP_NORM_WIDTH - 1
ENDC
DEF X_INTRO_TOP_7        EQU X_INTRO_TOP_6 + INTRO_TOP_NORM_WIDTH

DEF X_INTRO_0            EQU  39
DEF X_INTRO_1            EQU  54
DEF X_INTRO_2            EQU  60
DEF X_INTRO_3            EQU  74
DEF X_INTRO_4            EQU 108
DEF X_INTRO_5            EQU 122

DEF T_LOGO               EQU $01
DEF T_REG                EQU $19
DEF T_INTRO_REG          EQU $20
DEF T_INTRO_NOT          EQU T_INTRO_REG       +  8

IF DEF(COLOR8)
	DEF T_INTRO_NOT_2    EQU T_REG             +  1
ELSE
	DEF T_INTRO_NOT_2    EQU T_INTRO_NOT
ENDC

DEF T_INTRO_TOP_0        EQU T_INTRO_NOT       +  4

IF DEF(COLOR8)
	DEF T_INTRO_TOP_0_2  EQU T_INTRO_NOT_2     +  4
ELSE
	DEF T_INTRO_TOP_0_2  EQU T_INTRO_TOP_0
ENDC

DEF T_INTRO_TOP_1        EQU T_INTRO_TOP_0     +  2
DEF T_INTRO_TOP_2        EQU T_INTRO_TOP_1     +  2
DEF T_INTRO_TOP_3        EQU T_INTRO_TOP_2     +  2
DEF T_INTRO_TOP_4        EQU T_INTRO_TOP_3     +  2
IF DEF(EN_GB)
    DEF T_INTRO_TOP_5    EQU T_INTRO_TOP_2
ELSE
    DEF T_INTRO_TOP_5    EQU T_INTRO_TOP_4     +  2
ENDC
DEF T_INTRO_TOP_6        EQU T_INTRO_TOP_4     +  4
DEF T_INTRO_TOP_7        EQU T_INTRO_TOP_6     +  2
DEF T_INTRO_BY           EQU T_INTRO_TOP_7     +  4

DEF T_INTRO_N            EQU $80
DEF T_INTRO_E            EQU $A0

DEF T_INTRO_0            EQU $40   ; N0
DEF T_INTRO_1            EQU $50   ; I
DEF T_INTRO_2            EQU T_INTRO_N
DEF T_INTRO_3            EQU $58   ; T
DEF T_INTRO_4            EQU $60   ; D
DEF T_INTRO_5            EQU $70   ; O

DEF T_INTRO_N2           EQU T_INTRO_N

DEF COLOR8_STEP          EQU 64

IF !DEF(C_INTRO_BACK)
	DEF C_INTRO_BACK     EQU C_WHITE
ENDC

IF !DEF(C_INTRO_BACK_SGB)
	DEF C_INTRO_BACK_SGB     EQU C_INTRO_BACK
ENDC

IF !DEF(C_INTRO_TOP)
	DEF C_INTRO_TOP          EQU C_BLACK
ENDC

IF !DEF(C_INTRO_NOT)
	IF DEF(COLOR8)
		DEF C_INTRO_NOT      EQU C_RED
	ELSE
		DEF C_INTRO_NOT      EQU C_INTRO_TOP
	ENDC
ENDC

IF !DEF(C_INTRO_TOP_0)
	IF DEF(COLOR8)
		DEF C_INTRO_TOP_0 EQU C_ORANGE
	ELSE
		DEF C_INTRO_TOP_0 EQU C_INTRO_TOP
	ENDC
ENDC

IF !DEF(C_INTRO_TOP_1)
	IF DEF(COLOR8)
		DEF C_INTRO_TOP_1 EQU C_YELLOW
	ELSE
		DEF C_INTRO_TOP_1 EQU C_INTRO_TOP
	ENDC
ENDC

IF !DEF(C_INTRO_TOP_2)
	IF DEF(COLOR8)
		DEF C_INTRO_TOP_2 EQU C_OCHRE
	ELSE
		DEF C_INTRO_TOP_2 EQU C_INTRO_TOP
	ENDC
ENDC

IF !DEF(C_INTRO_TOP_3)
	IF DEF(COLOR8)
		DEF C_INTRO_TOP_3 EQU C_GREEN
	ELSE
		DEF C_INTRO_TOP_3 EQU C_INTRO_TOP
	ENDC
ENDC

IF !DEF(C_INTRO_TOP_4)
	IF DEF(COLOR8)
		DEF C_INTRO_TOP_4 EQU C_DARK_CYAN
	ELSE
		DEF C_INTRO_TOP_4 EQU C_INTRO_TOP
	ENDC
ENDC

IF !DEF(C_INTRO_TOP_5)
	IF DEF(COLOR8)
		DEF C_INTRO_TOP_5 EQU C_BLUE
	ELSE
		DEF C_INTRO_TOP_5 EQU C_INTRO_TOP
	ENDC
ENDC

IF !DEF(C_INTRO_TOP_6)
	IF DEF(COLOR8)
		DEF C_INTRO_TOP_6 EQU C_MAGENTA
	ELSE
		DEF C_INTRO_TOP_6 EQU C_INTRO_TOP
	ENDC
ENDC

IF !DEF(C_INTRO_TOP_7)
	IF DEF(COLOR8)
		DEF C_INTRO_TOP_7 EQU C_PURPLE
	ELSE
		DEF C_INTRO_TOP_7 EQU C_INTRO_TOP
	ENDC
ENDC

IF !DEF(C_INTRO_BY)
	DEF C_INTRO_BY       EQU C_INTRO_TOP
ENDC

IF !DEF(C_INTRO_BY1)
	IF DEF(COLOR8)
		DEF C_INTRO_BY1      EQU C_DARK_PURPLE
	ELSE
		DEF C_INTRO_BY1      EQU C_INTRO_BY
	ENDC
ENDC

IF !DEF(C_INTRO_BY2)
	IF DEF(COLOR8)
		DEF C_INTRO_BY2      EQU C_VIOLET
	ELSE
		DEF C_INTRO_BY2      EQU C_INTRO_BY
	ENDC
ENDC

IF !DEF(C_INTRO_BOTTOM)
	DEF C_INTRO_BOTTOM   EQU C_BLACK
ENDC

IF !DEF(C_INTRO_BOTTOM_SGB)
	DEF C_INTRO_BOTTOM_SGB   EQU C_INTRO_BOTTOM
ENDC

IF !DEF(FADEOUT_START)
	DEF FADEOUT_START        EQU 64
ENDC

IF !DEF(FADEOUT_LENGTH)
	DEF FADEOUT_LENGTH       EQU 32
ENDC

DEF LOGO_WIDTH           EQU 12

DEF OBJ_INTRO_NOT        EQU  0
FOR I, 0, 8
	DEF OBJ_INTRO_TOP_{d:I} EQU OBJ_INTRO_NOT + I + 2
ENDR
DEF OBJ_INTRO_TOP_END    EQU OBJ_INTRO_TOP_7   +  1

DEF OBJ_INTRO_REG        EQU OBJ_INTRO_TOP_END

; Reuse since it never appears alongside the logo
DEF OBJ_INTRO_0          EQU OBJ_INTRO_TOP_END
FOR I, 1, 6
	DEF _ =(I-1)
	DEF OBJ_INTRO_{d:I}  EQU OBJ_INTRO_{d:_}   +  INTRO_{d:_}_WIDTH
ENDR
DEF OBJ_INTRO_LOGO_END   EQU OBJ_INTRO_5       +  INTRO_5_WIDTH

DEF OBJ_INTRO_END        EQU OBJ_INTRO_LOGO_END
